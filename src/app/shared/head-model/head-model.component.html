<div
  id="circularcursor"
  [style.top]="cursorTop"
  [style.left]="cursorLeft"
  [style.display]="drawingEnabled && cursorInCanvas ? 'block' : 'none'"
></div>

<!-- LEFT CONTROL BOX MOVING / DRAWING -->
<div
  style="position: absolute; width: 145px; top: calc(5% + 75px); left: 10px"
  fxLayout="column"
  fxLayoutGap="10px"
  fxLayoutAlign="space-between center"
>
  <h4 class="floating-control">Movement Controls</h4>
  <mat-button-toggle-group
    fxFlexFill
    class="floating-control base-elevation"
    [(ngModel)]="drawingEnabled"
    (change)="toggleDrawing()"
  >
    <mat-button-toggle fxFlex [value]="false"> Move </mat-button-toggle>
    <mat-button-toggle fxFlex [value]="true"> Draw </mat-button-toggle>
  </mat-button-toggle-group>
  <mat-button-toggle-group
    fxFlexFill
    class="floating-control base-elevation"
    [(ngModel)]="controlMode"
    (change)="toggleControlMode()"
    [disabled]="drawingEnabled"
  >
    <mat-button-toggle fxFlex value="rotate"> Rotate </mat-button-toggle>
    <mat-button-toggle fxFlex value="pan"> Pan </mat-button-toggle>
  </mat-button-toggle-group>
  <button
    fxFlexFill
    fxLayout="row"
    fxLayoutAlign="space-between center"
    mat-raised-button
    class="floating-control"
    (click)="resetControls()"
  >
    <mat-icon>person</mat-icon>
    Reset view
  </button>
  <h4 class="floating-control section-header">Drawing Controls</h4>
  <button
    fxFlexFill
    mat-raised-button
    class="floating-control"
    ngx-colors-trigger
    colorsAnimation="popup"
    format="rgba"
    [hideTextInput]="true"
    (change)="onColorChange()"
    [(ngModel)]="drawColor"
    colorPickerControls="no-alpha"
  >
    <div fxLayout="row" fxLayoutAlign="space-between center">
      <ngx-colors></ngx-colors>
      Drawing color
    </div>
  </button>
  <button
    fxFlexFill
    fxLayout="row"
    fxLayoutAlign="space-between center"
    mat-raised-button
    class="floating-control"
    (click)="undoLastStroke()"
  >
    <mat-icon>undo</mat-icon>
    Undo stroke
  </button>
  <button
    fxFlexFill
    fxLayout="row"
    fxLayoutAlign="space-between center"
    mat-raised-button
    class="floating-control"
    (click)="clearDrawing()"
  >
    <mat-icon>clear</mat-icon>
    Clear drawing
  </button>
  <button
    *ngIf="drawingKind === 'lesion'"
    fxFlexFill
    fxLayout="row"
    fxLayoutAlign="space-between center"
    mat-raised-button
    color="primary"
    class="floating-control save-button"
    (click)="saveDrawing()"
  >
    <mat-icon>save</mat-icon>
    Save lesion
  </button>
</div>
<!-- RIGHT CONTROL BOX STEP OVERVIEW, SURGICAL TECHNIQUES -->
<div
  style="position: absolute; width: 145px; top: calc(5% + 75px); right: 10px"
  fxLayout="column"
  fxLayoutGap="10px"
  fxLayoutAlign="space-between center"
  class="floating-control"
  *ngIf="drawingKind === 'technique'"
>
  <h4 class="floating-control">Step Overview</h4>
  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title> Step 1 </mat-panel-title>
        <mat-icon>account_circle</mat-icon>
      </mat-expansion-panel-header>
      <mat-panel-description
        >Cut open the head carefully.</mat-panel-description
      >
      <mat-action-row>
        <button mat-button color="primary" (click)="nextStep()">
          Go to Step
        </button>
      </mat-action-row>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title> Step 2 </mat-panel-title>
        <mat-icon>account_circle</mat-icon>
      </mat-expansion-panel-header>
      <mat-panel-description
        >Cut open the head carefully.</mat-panel-description
      >
      <mat-action-row>
        <button mat-button color="primary" (click)="nextStep()">
          Go to Step
        </button>
      </mat-action-row>
    </mat-expansion-panel>
  </mat-accordion>
</div>
<div
  id="container-{{ this.drawingKind }}"
  [ngStyle]="{ cursor: drawingEnabled && cursorInCanvas ? 'none' : 'inherit' }"
></div>
<!-- BOTTOM STEP CONTROLS -->
<div
  style="position: absolute; bottom: 10%; right: 10%; left: 10%"
  fxLayout="row"
  fxLayoutGap="10px"
  fxLayoutAlign="space-between center"
  class="floating-control"
  *ngIf="drawingKind === 'technique'"
>
  <button fxLayout="row" fxLayoutAlign="space-between center" mat-raised-button>
    <mat-icon>chevron_left</mat-icon> <span>Previous Step</span>
  </button>
  <button fxLayout="row" fxLayoutAlign="space-between center" mat-raised-button>
    <span>Next Step</span><mat-icon>chevron_right</mat-icon>
  </button>
</div>
